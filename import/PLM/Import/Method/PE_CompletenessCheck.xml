<AML>
 <Item type="Method" id="88C2283FD1664AAB9C51321624232F35" action="add">
  <comments />
  <execution_allowed_to keyed_name="World" type="Identity">A73B655731924CD0B027E4F4D5FCC0A9</execution_allowed_to>
  <method_code><![CDATA[if(top.aras.isDirtyEx(inDom) || top.aras.isNew(inDom))
{
  if(top.aras.confirm(top.aras.getResource("plm", "changeitem.saveit")))
  {
    var tmpOnSaveCommand;
    if (top.onSaveCommand) tmpOnSaveCommand = top.onSaveCommand;
    if (top.main && top.main.work && top.main.work.onSaveCommand) tmpOnSaveCommand = top.main.work.onSaveCommand;
    tmpOnSaveCommand();
  }
  else
  {
    return;
  }
}

var aml = "<Item type='Method' action='PE_ChangeItemTransition'>" + inDom.xml + "</Item>";
var soap_res = top.aras.soapSend("ApplyMethod", aml);
var message_string;
if (soap_res.getFaultCode() != 0)
{
  message_string = soap_res.getFaultString();
  //fault_string = fault_string.replace(/\n/g, "<br/>");
}
else
{
  message_string = top.aras.getResource("plm", "changeitem.completenesschecksucceeded", inDom.getAttribute('type'));
}


var param = new Object();
param.title  = "Completeness Check Results";
param.aras   = top.aras;
param.message_string = message_string;
  
var form = top.aras.getItemByName("Form", "PE_ChangeItemValidationDialog", "width,height");
  
var width  = top.aras.getItemProperty(form, "width");
var height = top.aras.getItemProperty(form, "height");
if (!width)  width  = 600;
if (!height) height = 250;
    
param.formId = form.getAttribute("id");
var options = {
  dialogWidth: width,
  dialogHeight: height
};
var wnd = top.aras.getMainWindow();
wnd = wnd === top ? wnd.main : top;
res = top.aras.modalDialogHelper.show('DefaultPopup', wnd, param, options, 'ShowFormAsADialog.html');
]]></method_code>
  <method_type>JavaScript</method_type>
  <name>PE_CompletenessCheck</name>
 </Item>
</AML>